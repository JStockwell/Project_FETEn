[gd_scene load_steps=20 format=3 uid="uid://wvt31gswalxh"]

[ext_resource type="Script" path="res://Scripts/3D/mapCombat.gd" id="1_rhc0y"]
[ext_resource type="Texture2D" uid="uid://cdr8pfgua7joc" path="res://Assets/UI/attack_button.png" id="3_1u004"]
[ext_resource type="Texture2D" uid="uid://dhymjl6nk7i45" path="res://Assets/UI/move_button.png" id="3_4py7p"]
[ext_resource type="FontFile" uid="uid://p6npb2mlppqj" path="res://Assets/Fonts/Micrhoma/Michroma-Regular.ttf" id="3_s3ban"]
[ext_resource type="Texture2D" uid="uid://bdpy5pn7bey5t" path="res://Assets/UI/ui_reference.png" id="4_au5eu"]
[ext_resource type="Texture2D" uid="uid://bsl6g8gagqiap" path="res://Assets/UI/camera_button.png" id="5_d7t6j"]
[ext_resource type="Texture2D" uid="uid://54egr8br2bfy" path="res://Assets/UI/end_turn_button.png" id="5_rdtu0"]
[ext_resource type="Texture2D" uid="uid://ccgvnwjnwtmy4" path="res://Assets/UI/skill_button.png" id="6_mpm3b"]
[ext_resource type="Texture2D" uid="uid://bbh53o5x5olr0" path="res://Assets/UI/hp_empty.png" id="8_qrg6f"]
[ext_resource type="Texture2D" uid="uid://tok1r52onrms" path="res://Assets/UI/hp_full.png" id="9_aeilp"]
[ext_resource type="Texture2D" uid="uid://cfijrjclbo01q" path="res://Assets/UI/mana_empty.png" id="10_16okr"]
[ext_resource type="Texture2D" uid="uid://bknoolonomvoe" path="res://Assets/UI/mana_full.png" id="11_ipnbs"]
[ext_resource type="FontFile" uid="uid://71blta5wlshk" path="res://Assets/Fonts/Minecraft/Minecraft.ttf" id="12_fy7hm"]
[ext_resource type="PackedScene" uid="uid://btrtro6xli2hs" path="res://Scenes/UI/initiative.tscn" id="13_l6mli"]
[ext_resource type="Texture2D" uid="uid://bktpssxw1kswd" path="res://Assets/UI/sel_char_bg.png" id="13_nloq1"]

[sub_resource type="LabelSettings" id="LabelSettings_3uv5b"]
font_color = Color(1, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_sp4do"]
font = ExtResource("12_fy7hm")
font_size = 32
font_color = Color(0, 0, 0, 1)

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_ifhw8"]

[sub_resource type="LabelSettings" id="LabelSettings_ebm7i"]
font = ExtResource("3_s3ban")
font_size = 32

[node name="MapCombat" type="Node3D"]
script = ExtResource("1_rhc0y")

[node name="CharacterGroup" type="Node3D" parent="."]

[node name="EnemyGroup" type="Node3D" parent="."]

[node name="MapTileGroup" type="Node3D" parent="."]

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Actions" type="Control" parent="UI"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="MoveButton" type="TextureButton" parent="UI/Actions"]
layout_mode = 0
offset_left = 120.0
offset_top = 616.0
offset_right = 248.0
offset_bottom = 664.0
texture_normal = ExtResource("3_4py7p")
ignore_texture_size = true
stretch_mode = 5

[node name="PhysAttackButton" type="TextureButton" parent="UI/Actions"]
layout_mode = 0
offset_left = 96.0
offset_top = 680.0
offset_right = 273.0
offset_bottom = 728.0
texture_normal = ExtResource("3_1u004")
ignore_texture_size = true
stretch_mode = 5

[node name="EndTurnButton" type="TextureButton" parent="UI/Actions"]
layout_mode = 0
offset_left = 1564.0
offset_top = 961.0
offset_right = 1852.0
offset_bottom = 1033.0
texture_normal = ExtResource("5_rdtu0")
ignore_texture_size = true
stretch_mode = 5

[node name="ChangeCamera" type="TextureButton" parent="UI/Actions"]
layout_mode = 0
offset_left = 1742.0
offset_top = 44.0
offset_right = 1854.0
offset_bottom = 148.0
texture_normal = ExtResource("5_d7t6j")
ignore_texture_size = true
stretch_mode = 5

[node name="SkillMenu" type="MenuButton" parent="UI/Actions"]
layout_mode = 0
offset_left = 116.0
offset_top = 741.0
offset_right = 252.0
offset_bottom = 797.0
icon = ExtResource("6_mpm3b")
icon_alignment = 1
expand_icon = true
item_count = 1
popup/item_0/text = ""
popup/item_0/id = 0

[node name="SkillIssue" type="Label" parent="UI/Actions"]
layout_mode = 0
offset_left = 304.0
offset_top = 688.0
offset_right = 448.0
offset_bottom = 720.0
text = "Skill out of range"
label_settings = SubResource("LabelSettings_3uv5b")
horizontal_alignment = 1
vertical_alignment = 1

[node name="SkillIssue2" type="Label" parent="UI/Actions"]
layout_mode = 0
offset_left = 280.0
offset_top = 688.0
offset_right = 472.0
offset_bottom = 720.0
text = "Obstacle blocking shot!"
label_settings = SubResource("LabelSettings_3uv5b")
horizontal_alignment = 1
vertical_alignment = 1

[node name="StatusBars" type="Control" parent="UI"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="HPBar" type="TextureProgressBar" parent="UI/StatusBars"]
layout_mode = 0
offset_left = 57.0
offset_top = 963.0
offset_right = 314.0
offset_bottom = 997.0
value = 100.0
nine_patch_stretch = true
texture_under = ExtResource("8_qrg6f")
texture_progress = ExtResource("9_aeilp")

[node name="ManaBar" type="TextureProgressBar" parent="UI/StatusBars"]
layout_mode = 0
offset_left = 57.0
offset_top = 1002.0
offset_right = 314.0
offset_bottom = 1036.0
value = 100.0
nine_patch_stretch = true
texture_under = ExtResource("10_16okr")
texture_progress = ExtResource("11_ipnbs")

[node name="HPText" type="Label" parent="UI/StatusBars"]
layout_mode = 0
offset_left = 139.0
offset_top = 967.0
offset_right = 229.0
offset_bottom = 999.0
text = "99/99"
label_settings = SubResource("LabelSettings_sp4do")
horizontal_alignment = 1

[node name="ManaText" type="Label" parent="UI/StatusBars"]
layout_mode = 0
offset_left = 139.0
offset_top = 1007.0
offset_right = 229.0
offset_bottom = 1039.0
text = "99/99"
label_settings = SubResource("LabelSettings_sp4do")
horizontal_alignment = 1

[node name="SelectedCharacter" type="Control" parent="UI"]
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="SelCharBg" type="Sprite2D" parent="UI/SelectedCharacter"]
position = Vector2(183.5, 884.875)
scale = Vector2(0.25, 0.243517)
texture = ExtResource("13_nloq1")

[node name="SelCharSprite" type="TextureRect" parent="UI/SelectedCharacter"]
layout_mode = 0
offset_left = 128.0
offset_top = 824.0
offset_right = 248.0
offset_bottom = 944.0
texture = SubResource("PlaceholderTexture2D_ifhw8")
expand_mode = 1
stretch_mode = 5

[node name="Initiative" parent="UI" instance=ExtResource("13_l6mli")]
layout_mode = 1

[node name="DebugUI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DebugLabel" type="Label" parent="DebugUI"]
layout_mode = 0
offset_right = 1912.0
offset_bottom = 48.0

[node name="StartUI" type="Control" parent="."]
visible = false
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="StartButton" type="Button" parent="StartUI"]
layout_mode = 0
offset_left = 768.0
offset_top = 448.0
offset_right = 1152.0
offset_bottom = 640.0

[node name="StartLabel" type="Label" parent="StartUI"]
layout_mode = 0
offset_left = 808.0
offset_top = 488.0
offset_right = 1112.0
offset_bottom = 600.0
text = "START BATTLE"
label_settings = SubResource("LabelSettings_ebm7i")
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="UiReference" type="Sprite2D" parent="."]
visible = false
position = Vector2(960, 540)
texture = ExtResource("4_au5eu")
metadata/_edit_lock_ = true

[connection signal="pressed" from="UI/Actions/MoveButton" to="." method="_on_move_button_pressed"]
[connection signal="pressed" from="UI/Actions/PhysAttackButton" to="." method="_on_phys_attack_button_pressed"]
[connection signal="pressed" from="UI/Actions/EndTurnButton" to="." method="_on_end_turn_button_pressed"]
[connection signal="pressed" from="UI/Actions/ChangeCamera" to="." method="_on_change_camera_pressed"]
[connection signal="pressed" from="StartUI/StartButton" to="." method="_on_start_button_pressed"]
